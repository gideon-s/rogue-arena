// Generated by CoffeeScript 1.7.1
(function() {
  window.Enemy = (function() {
    function Enemy(x, y) {
      this._x = x;
      this._y = y;
      this.draw();
    }

    Enemy.prototype.getSpeed = function() {
      return 100;
    };

    Enemy.prototype.act = function() {
      var astar, passableCallback, path, pathCallback, x, y;
      x = Game.player.getX();
      y = Game.player.getY();
      passableCallback = function(x, y) {
        return Game.map.isOpen([x, y]);
      };
      astar = new ROT.Path.AStar(x, y, passableCallback, {
        topology: 4
      });
      path = [];
      pathCallback = function(x, y) {
        return path.push([x, y]);
      };
      astar.compute(this._x, this._y, pathCallback);
      path.shift();
      if (path.length < 2) {
        Game.engine.lock();
        return alert("Game over - you were eaten by the dragon!");
      } else {
        x = path[0][0];
        y = path[0][1];
        Game.display.draw(this._x, this._y, Game.map.at([this._x, this._y]));
        this._x = x;
        this._y = y;
        return this.draw();
      }
    };

    Enemy.prototype.draw = function() {
      return Game.display.draw(this._x, this._y, "&", "red");
    };

    return Enemy;

  })();

}).call(this);
